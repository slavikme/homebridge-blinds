{
	"pluginAlias": "BlindsHTTP",
	"pluginType": "accessory",
	"singular": false,
	"schema": {
		"type": "object",
		"properties": {
			"name": {
				"title": "Name",
				"type": "string",
				"required": true
			},
			"up_url": {
				"title": "Up URL",
				"type": "string",
				"description": "The URL to send the 'UP' command.",
				"placeholder": "http://1.2.3.4/window/up",
				"pattern": "^https?://"
			},
			"down_url": {
				"title": "Down URL",
				"type": "string",
				"description": "The URL to send the 'DOWN' command.",
				"placeholder": "http://1.2.3.4/window/down",
				"pattern": "^https?://"
			},
			"position_url": {
				"title": "Position URL",
				"type": "string",
				"description": "The URL to get the current blinds position (must be 0-100 response).",
				"placeholder": "http://1.2.3.4/window/position",
				"pattern": "^https?://"
			},
			"position_jsonata": {
				"title": "Jsonata for Position URL",
				"type": "string",
				"description": "Jsonata expression to parse position URL response.",
				"placeholder": "ShutterPosition1"
			},
			"stop_url": {
				"title": "Stop URL",
				"type": "string",
				"description": "The URL to send the 'STOP' command.",
				"placeholder": "http://1.2.3.4/window/stop",
				"pattern": "^https?://"
			},
			"use_same_url_for_stop": {
				"title": "Use Same URL for Stop",
				"type": "boolean",
				"default": false,
				"description": "Instead of using the 'STOP' command, just re-send the 'UP' or 'DOWN' command."
			},
			"show_stop_button": {
				"title": "Show Stop Button",
				"type": "boolean",
				"default": false,
				"description": "Exposes a 'STOP' button within HomeKit."
			},
			"show_toggle_button": {
				"title": "Show Toggle Button",
				"type": "boolean",
				"default": false,
				"description": "Exposes a 'TOGGLE' button within HomeKit."
			},
			"http_method": {
				"title": "HTTP Parameters",
				"type": "object",
				"properties": {
					"method": {
						"title": "HTTP Method",
						"type": "string",
						"placeholder": "POST",
						"typeahead": {
							"source": [
								"GET",
								"POST",
								"PUT"
							]
						}
					}
				},
				"description": "JSON object with custom request HTTP parameters/headers for up/down/stop URL's."
			},
			"motion_time": {
				"title": "Motion Time",
				"type": "number",
				"placeholder": "10000",
				"minimum": 0,
				"description": "Time (in ms) for blinds to move completely up or down."
			},
			"motion_up_time": {
				"title": "Motion Upward Time",
				"type": "number",
				"placeholder": "10000",
				"minimum": 0,
				"description": "Time (in ms) for blinds to move completely from down to up."
			},
			"motion_down_time": {
				"title": "Motion Downward Time",
				"type": "number",
				"placeholder": "10000",
				"minimum": 0,
				"description": "Time (in ms) for blinds to move completely from up to down."
			},
			"response_lag": {
				"title": "Response Lag",
				"type": "number",
				"placeholder": "0",
				"minimum": 0,
				"description": "Time (in ms) for device to respond after HTTP request. Optional parameter to improve time calculation when setting intermediate values."
			},
			"trigger_stop_at_boundaries": {
				"title": "Send Stop at Boundaries",
				"type": "boolean",
				"default": false,
				"description": "Send STOP command at boundaries (0/100) - used if blinds do not stop automatically."
			},
			"success_codes": {
				"title": "HTTP success codes",
				"type": "array",
				"items": {
					"title": "HTTP Code",
					"type": "number",
					"placeholder": "200"
				},
				"uniqueItems": true,
				"description": "Array of response codes that are interpreted as a successful reply."
			},
			"max_http_attempts": {
				"title": "Maximum HTTP attempts",
				"type": "number",
				"placeholder": "5",
				"minimum": 1,
				"description": "Maximum number of HTTP attempts (on error or timeout) per request."
			},
			"retry_delay": {
				"title": "Wait between HTTP attempts",
				"type": "number",
				"placeholder": "2000",
				"minimum": 0,
				"description": "Time (in ms) to wait between HTTP attempts."
			},
			"verbose": {
				"title": "Verbose logging",
				"type": "boolean",
				"default": false,
				"description": "Verbose logging - show getTargetPosition / getTargetState / getCurrentPosition requests."
			}
		}
	},
	"layout": [
		"name",
		"up_url",
		"down_url",
		"use_same_url_for_stop",
		"stop_url",
		"trigger_stop_at_boundaries",
		"motion_time",
		{
			"ref": "advanced",
			"type": "fieldset",
			"expandable": true,
			"title": "Additional Options",
			"items": [
				{
					"type": "flex",
					"flex-flow": "row wrap",
					"items": [
						{
							"type": "flex",
							"flex-flow": "column",
							"items": [
								"motion_up_time",
								"response_lag",
								"show_stop_button",
								"http_method",
								"max_http_attempts",
								"verbose"
							]
						},
						{
							"type": "flex",
							"flex-flow": "column",
							"items": [
								"motion_down_time",
								"position_jsonata",
								"show_toggle_button",
								"success_codes",
								"retry_delay"
							]
						}
					]
				}
			]
		}
	]
}
